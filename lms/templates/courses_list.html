<%page expression_filter="h"/>
<%namespace name='static' file='static_content.html'/>
<%! from django.utils.translation import ugettext as _ %>

<section class="courses-container">
  <section class="highlighted-courses">

    % if settings.FEATURES.get('COURSES_ARE_BROWSABLE'):
      <section class="courses">
        <ul class="courses-listing">
          ## limiting the course number by using HOMEPAGE_COURSE_MAX as the maximum number of courses
          %for course in courses[:settings.HOMEPAGE_COURSE_MAX]:
          <li class="courses-listing-item">
              <%include file="course.html" args="course=course" />
          </li>
        %endfor
        </ul>
        <div class="slider-container">
          <div class="slider-wrap">
            <div class="slider-item"></div>
            <div class="slider-item"></div>
            <div class="slider-item"></div>
          </div>
          <span class="slide-btn slide-btn_left" role="button">
              <span class="fa fa-angle-left fa-4x" aria-hidden="true"></span>
          </span>
          <span class="slide-btn slide-btn_right" role="button">
              <span class="fa fa-angle-right fa-4x" aria-hidden="true"></span>
          </span>
        </div>
      </section>
    ## in case there are courses that are not shown on the homepage, a 'View all Courses' link should appear
      % if settings.HOMEPAGE_COURSE_MAX and len(courses) > settings.HOMEPAGE_COURSE_MAX:
      <div class="courses-more">
        <a class="courses-more-cta" href="${marketing_link('COURSES')}"> ${_("View all Courses")} </a>
      </div>
    % endif
    % endif

  </section>
</section>
<script>
    var body = document,
        slideWrap = body.querySelector('.slider-wrap'),
        slideBtnLeft = body.querySelector('.slide-btn_left'),
        slideBtnRight = body.querySelector('.slide-btn_right'),
        sliderLength = body.querySelectorAll('.slider-item').length,
        sliderWidth = body.querySelectorAll('.slider-item')[0].offsetWidth + 30,
        count = 0,
        sliderMaxWidth = sliderLength * sliderWidth - sliderWidth;

        function slideBtnLeftAction() {
          if(count <= 0 ) {
            return false;
          }
          count = count - sliderWidth;
          slideWrap.style.left = count + "px";
        }

        function slideBtnRightAction() {
          if(count >= sliderMaxWidth ) {
            return false;
          }
          count = count + sliderWidth;
          slideWrap.style.left = count + "px";
        }

        slideBtnRight.addEventListener('click', slideBtnRightAction);
        slideBtnLeft.addEventListener('click', slideBtnLeftAction);
</script>